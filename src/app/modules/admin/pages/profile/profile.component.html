<div class="flex flex-col flex-auto min-w-0">
    <!-- Header -->
    <div class="grid grid-cols-1 px-6 mt-8 md:px-8 pb-0">
        <div class="shadow">
        <div class="channelheader">
            <h3 class="panel-title text-bold">
                {{ data.title }} &nbsp;
                <mat-icon *ngIf="data?.is_verified === 1" class="icon-size-5"
                    style="vertical-align: middle;" [matTooltip]="'Channel Verified'"
                    [ngClass]="'text-success'" [svgIcon]="'heroicons_solid:badge-check'">
                </mat-icon>
                <mat-icon *ngIf="data?.is_verified === 0" class="icon-size-5 text-warning"
                    style="vertical-align: middle;" [matTooltip]="'Channel Not Verified'"
                    [ngClass]="{'cursor-pointer': userType === 'INFLUENCER'}"
                    [svgIcon]="'heroicons_solid:exclamation'"
                    (click)="userType === 'INFLUENCER' && openChannelVerification();">
                </mat-icon>| YouTube Channel Performance and Collaborations Insights 
            </h3>
        </div>
        <!-- User info -->
        <!-- <div
            class="flex flex-col flex-0 lg:flex-row items-center w-full mx-auto px-8 h-auto bg-gray-100 border-b border-solid border-gray-200">
            <div class="row w-full items-center">
                <div class="flex-auto grid grid-cols-3 p-1 items-center justify-center">
                     <div class="xs:col-span-3 sm:col-span-2 xs:text-center sm:text-left">
                        <span class="font-bold text-lg h4">YouTube Channel Performance and Collaborations
                            Insights</span>
                    </div>
                    <div class="xs:col-span-3 sm:col-span-1 text-right">
                        <button *ngIf="!userType || userType === 'BRAND'"
                            class="bg-red-700 text-white sm:float-right hover:bg-gray-200 transition duration-0 hover:duration-500 hover:text-black font-medium p-2 rounded-md">BOOK
                            FOR COLLABORATIONS</button>&nbsp;
                        <a class="bg-red-700 rounded-md p-2 share-button cursor-pointer">
                            <mat-icon class="text-white share-button-svg" [svgIcon]="'share'"></mat-icon>
                        </a>
                        <share-buttons theme="circles-dark"
                            [include]="['facebook', 'twitter', 'whatsapp']"
                            [showIcon]="true" [showText]="false" [url]="'https://bmi.yt/' + data.channel"
                            [description]="data.title + ' BMI Profile'" twitterAccount="bookmyinfluencers" class="">
                        </share-buttons>
                    </div>
                </div>
            </div>
        </div> -->

        <div class="flex flex-col flex-0 lg:flex-row items-center w-full mx-auto h-auto bg-card">
            <div class="w-full p-6 text-left">
                <div class="col-12 col-sm-12 col-md-2 p-0 inset-0 flex justify-center">
                    <div class="relative flex-col items-center">
                        <div class="overflow-hidden m-auto">
                            <img class="items-center justify-center w-full h-auto xs:w-100 xs:h-55 md:w-100 md:h-55 rounded-full overflow-hidden m-auto"
                                [src]="data.profile_pic">
                            <!-- <img class="items-center justify-center w-full h-auto xs:w-26 xs:h-26 md:w-26 md:h-26 rounded-full overflow-hidden m-auto" src="assets/images/cards/avatar-400x400.jpg" alt="campaign avatar" /> -->
                        </div>
                        <div class="items-center pt-6" style="text-align: center;">
                            <a mat-icon-button [href]="data.facebook" target="_blank">
                                <mat-icon class="text-black" [svgIcon]="'feather:facebook'"></mat-icon>
                            </a>
                            <a mat-icon-button [href]="data.instagram" target="_blank">
                                <mat-icon class="text-black" [svgIcon]="'feather:instagram'"></mat-icon>
                            </a>
                            <button mat-icon-button matTooltip="copy url" (click)="copyLinkToClipboard('https://stage.bookmyinfluencers.com/youtube/' +this.channelId +'/'+ this.userDetails.uuid) ">
                                <i class="fa-solid fa-copy fa-2xl"></i>
                                <!-- <mat-icon class="text-black" [svgIcon]="'feather:instagram'"></mat-icon> -->
                              
                            </button>
                        </div>
                    </div>
                </div>
                <div class="col-12 col-sm-12 col-md-6 my-2 mt-15 md:mt-0">
                    <div class="min-w-0 ml-0 ml-sm-4">
                        <!-- <div class="">
                            &nbsp;
                            <mat-icon *ngIf="data?.is_verified === 1" class="icon-size-5"
                                style="vertical-align: middle;" [matTooltip]="'Channel Verified'"
                                [ngClass]="'text-success'" [svgIcon]="'heroicons_solid:badge-check'">
                            </mat-icon>
                            <mat-icon *ngIf="data?.is_verified === 0" class="icon-size-5 text-warning"
                                style="vertical-align: middle;" [matTooltip]="'Channel Not Verified'"
                                [ngClass]="{'cursor-pointer': userType === 'INFLUENCER'}"
                                [svgIcon]="'heroicons_solid:exclamation'"
                                (click)="userType === 'INFLUENCER' && openChannelVerification();">
                            </mat-icon>
                        </div> -->
                        <div class="flex flex-0 items-center justify-content-center justify-content-md-start mt-0">
                            <div class="flex flex-row w-full max-w-none mx-auto">
                                <div class="items-center text-justify">
                                    <app-more-less-text [text]="data.description" [wordLimit]="125">
                                    </app-more-less-text>
                                </div>
                            </div>
                        </div>
                        <div class="flex flex-0 items-center justify-content-center justify-content-md-start">
                            <div class="grid grid-cols-4 mt-5 text-center items-center space-x-6">
                                <div class="flex flex-col col-span-1 xs:col-span-2 sm:col-span-1 items-center text-center">
                                    <span class="font-bold">{{ data.subscriberCount | thousandSuff : 2 }}</span>
                                    <span class="text-sm font-medium text-secondary">SUBSCRIBERS</span>
                                </div>
                                <div class="flex flex-col col-span-1 xs:col-span-2 sm:col-span-1 items-center text-center">
                                    <span class="font-bold">{{ data.viewCount | thousandSuff : 2 }}</span>
                                    <span class="text-sm font-medium text-secondary">TOTAL&nbsp;VIEWS</span>
                                </div>
                                <div class="flex flex-col col-span-1 xs:col-span-2 sm:col-span-1 mob-cent items-center text-center">
                                    <span class="font-bold">{{ data.videoCount | thousandSuff }}</span>
                                    <span class="text-sm font-medium text-secondary">TOTAL&nbsp;VIDEOS</span>
                                </div>
                                <div class="flex flex-col col-span-1 xs:col-span-2 sm:col-span-1 items-center text-center">
                                    <span class="font-bold">{{ data.averageView | thousandSuff }}</span>
                                    <span class="text-sm font-medium text-secondary">AVERAGE&nbsp;VIEWS</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-12 col-sm-12 col-md-4 mt-5 md:mt-0 pull-right text-right pr-0">
                    <div class="relative flex-col items-center" *ngIf="data.featuredVideo">
                        <div class="flex flex-col text-center" style="margin:0px;padding:0px;overflow:hidden">
                            <iframe
                                [src]="'https://www.youtube.com/embed/' + data.featuredVideo?.videoId | safe : 'resourceUrl'"
                                frameborder="0" allowfullscreen style="height:222px;"
                                height="222px" ></iframe>
                            <!-- [src]="data.mostViewsVideos[0]"  -->
                            <!-- src="https://www.youtube.com/embed/w9KjZpuWmNw" -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
        </div>
    </div>

    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-2 p-6 md:p-8">
        <div class="flex flex-col flex-auto bg-card shadow overflow-hidden mr-4 ">
            <div class="channelheader">
                <h3 class="panel-title text-bold">Channel Performance Stats</h3>
                <!-- <div class="text-secondary font-medium">Based on views</div> -->
            </div>
            <div class="table-responsive">
                <table class="w-full bg-transparent tbnewboot" mat-table matSort [dataSource]="statsDataSource"
                    [trackBy]="trackByFn" #statsTable>
                    <!-- Details -->
                    <ng-container matColumnDef="details">
                        <th mat-header-cell mat-sort-header *matHeaderCellDef>
                           <span class="largfont"> Details</span>
                        </th>
                        <td mat-cell *matCellDef="let stats">
                            <span class="pr-6 font-medium text-secondary whitespace-nowrap"
                                [innerHTML]="stats.details">
                            </span>
                        </td>
                    </ng-container>
                    <!-- Average Views -->
                    <ng-container matColumnDef="avgViews">
                        <th mat-header-cell mat-sort-header *matHeaderCellDef>
                            <span class="largfont"> Average Views</span>
                        </th>
                        <td mat-cell *matCellDef="let stats">
                            <span class="pr-6 font-medium whitespace-nowrap">
                                {{ stats.avgViews | number: '1.0-0' }}
                            </span>
                        </td>
                    </ng-container>
                    <tr mat-header-row *matHeaderRowDef="statsTableColumns"></tr>
                    <tr class="order-row h-16" mat-row *matRowDef="let row; columns: statsTableColumns;"></tr>
                </table>
            </div>
        </div>
        <div class="flex flex-col flex-auto bg-card shadow overflow-hidden">
            <div class="channelheader">
                <h3 class="panel-title text-bold">Video Performance: Normal vs Sponsored</h3>
                <!-- <div class="text-secondary font-medium">Based on views</div> -->
            </div>
            <!-- Coming Soon Section -->
            <div class="h-100">
                <coming-soon></coming-soon>
            </div>
        </div>
    </div>

    <div class="grid grid-cols-1 gap-10 px-6 md:px-8 pb-8">
        <div class="flex flex-col flex-auto bg-card shadow overflow-hidden h-100">
            <div class="channelheader">
                <h3 class="panel-title text-bold">Brand Collaborations</h3>
            </div>
            <!-- Coming Soon Section -->
            <div class="h-100">
                <coming-soon></coming-soon>
            </div>
        </div>
    </div>
    <div *ngIf="data.mostViewsVideos?.length > 0" class="flex-auto grid grid-cols-12 gap-10 px-6 md:px-8 pb-8">
        <div class="flex-col col-span-12 bg-white shadow">
            <div class="channelheader">
                <h3 class="panel-title text-bold">Most Viewed Video</h3>
                <!-- <div class="text-secondary font-medium">Based on views</div> -->
            </div>
            <!-- <div class="col-span-12 px-6 py-4 bg-gray-100 border border-solid border-gray-200 rounded-t-2xl">
                <h3 class="mr-4 font-bold">Most Viewed Video</h3>
            </div> -->
            <div class="flex-auto grid grid-cols-12 px-6 md:px-8 py-3">
                <div class="col-span-4 relative">
                    <img class="object-cover" [src]="data.mostViewsVideos[0].media_url"
                        [alt]="data.mostViewsVideos[0].videoId">
                    <div class="absolute inset-0 flex items-center justify-center z-20">
                        <a mat-icon-button [href]="'https://www.youtube.com/watch?v=' + data.mostViewsVideos[0].videoId"
                            target="_blank" [matTooltip]="data.mostViewsVideos[0].title">
                            <mat-icon
                                class="icon-size-20 p-4 transform transition-transform ease-in-out duration-150 text-danger hover:text-white bg-black bg-opacity-50 hover:bg-red-600"
                                [svgIcon]="'heroicons_outline:play'"></mat-icon>
                        </a>
                    </div>
                </div>
                <div class="col-span-8 pl-2">
                    <h3 class="largfont pl-4 pb-1">{{ data.mostViewsVideos[0].title }}</h3>
                    <h6 class="my-2 text-semibold text-muted  pl-4 pb-1">{{ data.mostViewsVideos[0].publishedAt | date :
                        'mediumDate' }}</h6>
                    <p class="text-justify  pl-4 pb-1">{{ data.mostViewsVideos[0].description }}</p>
                </div>
            </div>
        </div>
    </div>

    <div class="grid grid-cols-1 gap-10 px-6 md:px-8 pb-8">
        <div class="flex flex-col shadow bg-card">
            <div class="channelheader">
                <h3 class="panel-title text-bold">Latest Top Performing Videos</h3>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-4 w-full p-4">
                <fuse-card *ngFor="let video of data.lastetViewsVideos" class="p-2 m-2" style="overflow:inherit!important;border-radius: 0!important;">
                    <div class="">
                        <img class="object-cover" [src]="video.media_url" [alt]="video.videoId">
                        <div class="absolute inset-0 flex items-center justify-center z-20">
                            <a mat-icon-button [href]="'https://www.youtube.com/watch?v=' + video.videoId" target="_blank"
                                [matTooltip]="video.title">
                                    <span class="bg-black bg-opacity-50 hover:bg-red-600 p-2" style="color: #FFF;font-weight: 600;">
                                    <mat-icon class="icon-size-10 transform transition-transform ease-in-out duration-150 text-danger text-white"
                                    [svgIcon]="'heroicons_outline:play'"></mat-icon><br/>
                                    2.25K+ Views
                                    </span>
                            </a>
                        </div>
                    </div>
                </fuse-card>
            </div>
        </div>
    </div>

</div>